## https://www.google.com/을 접속할 때 일어나는 일

1. 브라우저가 URL에 적힌 값을 파싱해서 HTTP Request Message를 만들고, OS에 전송 요청을 한다. 이 때, Domain으로 요청을 보낼 수 없기에 DNS Lookup을 수행한다.
2. DNS Lookup 과정은 브라우저 -> hosts 파일 -> DNS cache 순서로 도메인에 매칭되는 ip를 찾는다. 일반적으로 설명하는 DNS Lookup은 루트 도메인 서버에서부터 서브 도메인 서버 순으로 찾게 된다.
3. 이 요청은 프로토콜 스택이라는 OS에 내장된 네트워크 제어용 소프트웨어에 의해 패킷에 담기고 패킷에 제어정보를 덧붙여 LAN 어댑터에 전송하고, LAN 어댑터는 이를 전기신호로 변환시켜 송출한다.
4. 패킷은 스위칭 허브 등을 경유하여 인터넷 접속용 라우터에서 ISP로 전달되고 인터넷으로 이동한다.
5. 액세스 회선에 의해 통신사용 라우터로 운반되고 인터넷의 핵심부로 전달된다. 고속 라우터들 사이로 목적지까지 패킷이 흘러들어가게 된다.
6. 핵심부를 통고환  패킷은 목적지의 LAN에 도착하고 방화벽이 패킷을 검사한 후 캐시 서버로 보내어 웹 서버에 갈 필요가 있는지 검사한다.
7. 웹 서버에 도착한 패킷은 프로토콜 스택이 패킷을 추출하여 메시지를 복원하고 웹 서버 애플리케이션에 넘긴다. 애플리케이션은 요청에 대한 응답 데이터를 작성하여 클라이언트로 회송하고, 이는 전달된 방식 그대로 전송된다.

## 쿠키, 세션

### 쿠키

쿠키는 클라이언트가 서버에게 요청을 보냈을 때, 서버가 응답과 함께 쿠키를 생성해 보내준다.
클라이언트는 서버로부터 키와 값이 들어있는 데이터인 쿠키를 받아 브라우저에 저장한다.

쿠키의 유효 시간을 정하게 되면 유효시간에 따라 브라우저가 종료되어도 쿠키를 유지한다.

쿠키가 생성된 후 요청을 할 경우, HTTP 헤더에 쿠키를 함께 보낸다.

#### 쿠키의 예

- 아이디와 비밀번호를 저장하시겠습니까?
- 쇼핑몰의 장바구니 기능

### 세션

세션은 쿠키와 달리 서버 측에서 관리한다. 서버에서는 클라이언트를 구분하기 위해 세션 ID를 부여하고 웹 브라우저가 서버에 접속해서 종료할 때까지 세션을 유지한다. 클라이언트가 세션 ID에 대한 쿠키를 저장하고 있다.

### 쿠키와 세션의 차이

사용자의 정보가 저장된 데이터의 위치가 다르다. 쿠키는 클라이언트, 세션은 서버에 저장되어 있다.

쿠키는 클라이언트와 서버간의 요청과 응답을 하며 생성되기 때문에 중간에 스니핑을 당할 수도 있다. 하지만 세션은 서버측에서만 처리하기 때문에 쿠키보다 안전하다. 하지만 속도는 쿠키가 더 빠르다.

쿠키는 유효시간을 오래 잡아두면 브라우저를 종료해도 정보를 계속 유지할 수 있지만, 세션은 브라우저의 종료와 동시에 끊기게 된다.

### 그럼 보안에 안전한 세션만 사용해야 하나?

세션은 서버 자원을 사용한다. 그렇기 때문에 무분별하게 세션이 생성되면 서버의 메모리에 부하가 올 수 있다. 그렇끼 때문에 쿠키를 사용하게 된다.

## Statement, PreparedStatement

이 둘의 가장 큰 차이는 캐시의 사용 여부이다.

Statement는 매번 쿼리를 수행할 때마다 컴파일을 하게 되고, PreparedStatement는 캐시를 사용하여 재사용할 수 있다. 동일한 쿼리를 반복하게 될 때, DB에 훨씬 적은 부하를 주게 된다.

PreparedStatement는 보안에도 안전하다.

## Servlet, MVC

### Servlet

Servlet:  웹 애플리케이션을 만들 때 필요한 인터페이스


CGI 구현체: 동적 데이터를 처리하는 인터페이스

- 처음 웹은 정적인 데이터만 처리만 하였다. 
- CGI 구현체가 등장한 후 동적 데이터 처리를 할 수 있게 되었다.
    - request가 들어올때마다 프로세스를 생성함 (부하가 심하다) -> 쓰레드로 바꿈
    - 같은 CGI 구현체라도 쓰레드가 다르면 구현체가 각각 생김 -> 싱글톤 패턴으로 바꿈
    - 그것이 바로 서블릿
    - 웹 컨테이너가 request가 들어오면 request마다 쓰레드 생성 후 서블릿과 연결
    - 서블릿 인터페이스 내의 메소드를 호출함
        - init, servie, destory
- web.xml과 servlet을 연결하여 처리

### MVC

MVC: Model, View, Controller

사용자가 Controller를 조작하면 Controller는 model을 통해서 데이터를 가져오고 그 정보를 바탕으로 시각적인 표현을 담당하는 View를 제어해서 사용자에게 전달한다.
